module.exports=[36430,a=>{"use strict";a.s(["UploadOutlined",()=>f],36430);var b=a.i(27669);let c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var d=a.i(73682);function e(){return(e=Object.assign.bind()).apply(this,arguments)}let f=b.forwardRef((a,f)=>b.createElement(d.default,e({},a,{ref:f,icon:c})))},86908,a=>{"use strict";a.s(["companiesApi",()=>d]);var b=a.i(80628),c=a.i(44756);let d={async getComapines(){let a=await b.apiClient.get(c.API_ENDPOINTS.GET_COMPANIES);return{status:a.status,message:a.message,count:a.data?.length||0,data:a.data||[]}},async uploadCompany(a,d){let e=new FormData;return e.append("name",a.name),e.append("id",a.id),e.append("status",a.status),d&&e.append("file",d),await b.apiClient.upload(c.API_ENDPOINTS.SAVE_COMPANIE,e)}}},5184,a=>a.a(async(b,c)=>{try{a.s(["default",()=>u]);var d=a.i(8171),e=a.i(27669),f=a.i(78450),g=a.i(58440),h=a.i(13048),i=a.i(90943),j=a.i(14526),k=a.i(66571),l=a.i(68170),m=a.i(8241),n=a.i(52604),o=a.i(62021),p=a.i(36430),q=a.i(75627),r=a.i(86908),s=a.i(44756),t=b([q]);[q]=t.then?(await t)():t;let u=()=>{let[a,b]=(0,e.useState)([]),[c,t]=(0,e.useState)(!1),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(null),[y]=k.Form.useForm(),[z,A]=(0,e.useState)([]),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)(null),[H,I]=(0,e.useState)(""),[J,K]=(0,e.useState)({}),L=async()=>{t(!0);try{let a=await r.companiesApi.getComapines(),c=a?.data||[];b(c)}catch(a){console.error("Error fetching companies:",a),h.message.error("Failed to fetch companies.")}finally{t(!1)}};(0,e.useEffect)(()=>{L()},[]),(0,e.useEffect)(()=>{w?(y.setFieldsValue({name:w.name,status:"Active"===w.status}),w.image_url&&A([{uid:"-1",name:"logo.png",status:"done",url:w.image_url}])):(y.resetFields(),y.setFieldsValue({status:!0}),A([]))},[w,y,u]);let M=async()=>{try{let a=await y.validateFields();C(!0);let b=z[0]?.originFileObj,c={id:w?.id||"-1",name:a.name,status:a.status?"Active":"Inactive",logo:b,image_url:w?.image_url||""},d=await q.default.promise(r.companiesApi.uploadCompany(c,b),{loading:"Saving company...",success:"Company saved successfully!",error:"Failed to save company"});if("success"===d.status)L(),v(!1),x(null),y.resetFields(),A([]);else throw Error(d.message||"Failed to save company")}catch(a){console.error("Error saving company:",a)}finally{C(!1)}},N=[{title:"Name",dataIndex:"name",key:"name",align:"left"},{title:"Logo",dataIndex:"image_url",key:"logo",align:"left",render:(a,b)=>{let c=J[b.id];if(!a||c)return"No Logo";let e=a;if(!a.startsWith("http")){let b="string"==typeof s.API_CONFIG.BASE_URL?s.API_CONFIG.BASE_URL.replace(/\/api\/proxy$/,""):"",c=b.startsWith("http")?b:"https://appapi.1clickpolicy.com",d=a.startsWith("/")?a:`/${a}`;e=`${c}${d}`}return(0,d.jsx)("img",{src:e,alt:"logo",width:50,style:{cursor:"pointer"},onClick:()=>{var a,c;return a=e,c=b.name,void(G(a),I(c),E(!0))},onError:()=>{var a;return a=b.id,void K(b=>({...b,[a]:!0}))}})}},{title:"Status",dataIndex:"status",key:"status",align:"left",render:a=>{let b="active"===a.toLowerCase();return(0,d.jsx)(i.Tag,{color:b?"green":"red",children:a})}},{title:"Actions",key:"actions",align:"right",render:(a,b)=>(0,d.jsx)(g.Button,{type:"primary",icon:(0,d.jsx)(o.EditOutlined,{}),onClick:()=>{x(b),v(!0)},children:"Edit"})}];return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold",children:"Companies"}),(0,d.jsx)(g.Button,{type:"primary",onClick:()=>{x(null),v(!0)},children:"Add Company"})]}),(0,d.jsx)(f.Table,{columns:N,dataSource:a,loading:c,rowKey:"id"}),(0,d.jsx)(j.Modal,{title:w?"Edit Company":"Add New Company",open:u,onCancel:()=>{v(!1),x(null),y.resetFields(),A([])},onOk:M,confirmLoading:B,centered:!0,destroyOnClose:!0,okText:w?"Update":"Submit",children:(0,d.jsxs)(k.Form,{layout:"vertical",form:y,children:[(0,d.jsx)(k.Form.Item,{label:"Company Name",name:"name",rules:[{required:!0,message:"Please enter company name"}],children:(0,d.jsx)(l.Input,{placeholder:"Enter company name"})}),(0,d.jsx)(k.Form.Item,{label:"Logo",children:(0,d.jsx)(m.Upload,{listType:"picture",fileList:z,beforeUpload:()=>!1,onChange:({fileList:a})=>{A(a)},maxCount:1,children:(0,d.jsx)(g.Button,{icon:(0,d.jsx)(p.UploadOutlined,{}),children:"Select Logo"})})}),(0,d.jsx)(k.Form.Item,{label:"Status",name:"status",valuePropName:"checked",children:(0,d.jsx)(n.Switch,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})}),(0,d.jsxs)(j.Modal,{open:D,footer:null,onCancel:()=>E(!1),centered:!0,children:[(0,d.jsx)("h2",{style:{textAlign:"center",marginBottom:16},children:H}),(0,d.jsx)("img",{src:F||"",alt:"Company Logo",style:{width:"100%",maxHeight:"400px",objectFit:"contain"}})]})]})};c()}catch(a){c(a)}},!1),87562,a=>a.a(async(b,c)=>{try{a.s(["config",()=>p,"default",()=>l,"getServerSideProps",()=>o,"getStaticPaths",()=>n,"getStaticProps",()=>m,"handler",()=>x,"reportWebVitals",()=>q,"routeModule",()=>w,"unstable_getServerProps",()=>u,"unstable_getServerSideProps",()=>v,"unstable_getStaticParams",()=>t,"unstable_getStaticPaths",()=>s,"unstable_getStaticProps",()=>r]);var d=a.i(85926),e=a.i(27151),f=a.i(18859),g=a.i(58450),h=a.i(11203),i=a.i(5184),j=a.i(28899),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/companies",pathname:"/companies",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/companies",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=Downloads_One%20click_b63a925a._.js.map