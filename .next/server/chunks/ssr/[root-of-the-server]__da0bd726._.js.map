{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Downloads/One%20click/src/components/manageDashboard/EditPolicyModal.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Modal, Form, Input, Button, Popover, Tooltip, Row, Col, Divider } from \"antd\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\nimport { \r\n    Type, \r\n    Tag, \r\n    Link as LinkIcon, \r\n    Image as ImageIcon, \r\n    Palette, \r\n    Check, \r\n    BadgeCheck,\r\n    LayoutTemplate,\r\n    Edit3\r\n} from \"lucide-react\";\r\n\r\nimport { API_CONFIG, API_ENDPOINTS } from \"@/api/config\";\r\nimport { InsuranceItem } from \"@/api/types\";\r\n\r\n// ======================= HELPER COMPONENTS =======================\r\n\r\nconst ColorPickerPopover = ({\r\n  color,\r\n  onChange,\r\n  label\r\n}: {\r\n  color: string;\r\n  onChange: (c: string) => void;\r\n  label: string;\r\n}) => {\r\n  return (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n       <span className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-1\">\r\n         <Palette size={12} /> {label}\r\n       </span>\r\n       <Popover\r\n        trigger=\"click\"\r\n        placement=\"bottomLeft\"\r\n        content={\r\n            <div className=\"p-2\">\r\n                <HexColorPicker color={color} onChange={onChange} />\r\n                <div className=\"mt-3 flex items-center gap-2\">\r\n                    <div className=\"w-8 h-8 rounded border border-gray-200\" style={{ backgroundColor: color }} />\r\n                    <Input \r\n                        size=\"small\" \r\n                        value={color} \r\n                        onChange={(e) => onChange(e.target.value)} \r\n                        className=\"font-mono text-xs\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        }\r\n       >\r\n            <div \r\n                className=\"h-10 w-full rounded-lg border border-gray-200 shadow-sm flex items-center gap-3 px-3 cursor-pointer hover:border-blue-400 transition-colors bg-white group\"\r\n            >\r\n                <div \r\n                    className=\"w-6 h-6 rounded-full border border-gray-200 shadow-inner\" \r\n                    style={{ backgroundColor: color }} \r\n                />\r\n                <span className=\"font-mono text-sm text-gray-600 group-hover:text-blue-600\">{color}</span>\r\n            </div>\r\n       </Popover>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ======================= LIVE PREVIEW CARD =======================\r\n\r\nconst CardPreview = ({ values }: { values: Partial<InsuranceItem> }) => {\r\n    // Default Fallbacks\r\n    const title = values.title || \"Policy Title\";\r\n    const subtitle = values.subtitle || \"Policy Subtitle Description\";\r\n    const tag = values.tag || \"Tag Text\";\r\n    const badge = values.badge || \"Badge\";\r\n    const image = values.image || \"/no-image.png\";\r\n    \r\n    // Color Fallbacks\r\n    const badgeColor = values.badge_color || \"#000000\";\r\n    const tagColor = values.tag_color || \"#f3f4f6\";\r\n    const tagTextColor = values.tag_text_color || \"#1f2937\";\r\n\r\n    return (\r\n        <div className=\"w-full h-full bg-gray-50 rounded-2xl flex flex-col items-center justify-center p-8 border border-gray-200\">\r\n             <div className=\"text-sm font-semibold text-gray-400 mb-6 uppercase tracking-widest flex items-center gap-2\">\r\n                <LayoutTemplate size={16} /> Live Preview\r\n             </div>\r\n             \r\n             {/* THE CARD (Exact replica of Manage Dashboard) */}\r\n             <div className=\"w-full max-w-[280px] bg-white rounded-xl shadow-sm border border-gray-200 p-4 transition-all duration-200 flex flex-col relative overflow-hidden group hover:shadow-md hover:border-blue-300\">\r\n                {/* Badge */}\r\n                <div \r\n                    className=\"absolute top-3 right-3 px-2 py-0.5 text-[10px] font-bold rounded shadow-sm z-10\"\r\n                    style={{ backgroundColor: badgeColor, color: \"#ffffff\" }}\r\n                >\r\n                    {badge}\r\n                </div>\r\n\r\n                {/* Image */}\r\n                <div className=\"h-32 w-full flex items-center justify-center mb-3 bg-gray-50 rounded-lg overflow-hidden border border-gray-100\">\r\n                    {values.image ? (\r\n                        <img src={image} className=\"h-full object-contain p-2\" alt=\"preview\" />\r\n                    ) : (\r\n                        <ImageIcon className=\"text-gray-300\" size={32} />\r\n                    )}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 flex flex-col min-h-0\">\r\n                    <h2 className=\"font-bold text-base text-gray-800 leading-tight mb-1 truncate\" title={title}>\r\n                        {title}\r\n                    </h2>\r\n                    <p className=\"text-xs text-gray-500 line-clamp-2 mb-3 h-8\">\r\n                        {subtitle}\r\n                    </p>\r\n\r\n                    <div className=\"mt-auto flex items-center justify-between\">\r\n                         <span\r\n                            className=\"inline-block px-2 py-0.5 text-[10px] font-semibold rounded\"\r\n                            style={{ backgroundColor: tagColor, color: tagTextColor }}\r\n                        >\r\n                            {tag}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Button Mock */}\r\n                <Button\r\n                    type=\"primary\"\r\n                    className=\"mt-3 w-full h-8 text-xs font-medium\"\r\n                    icon={<Edit3 size={14} />}\r\n                >\r\n                    Edit\r\n                </Button>\r\n             </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// ======================= MAIN MODAL =======================\r\n\r\ninterface EditPolicyModalProps {\r\n  open: boolean;\r\n  onCancel: () => void;\r\n  item: InsuranceItem | null;\r\n  onSuccess: (updatedItem: InsuranceItem) => void;\r\n}\r\n\r\nconst EditPolicyModal = ({\r\n  open,\r\n  onCancel,\r\n  item,\r\n  onSuccess,\r\n}: EditPolicyModalProps) => {\r\n  const [form] = Form.useForm();\r\n  \r\n  // Local state for live preview (syncs with form values)\r\n  const [previewData, setPreviewData] = useState<Partial<InsuranceItem>>({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Initialize form\r\n  useEffect(() => {\r\n    if (open && item) {\r\n      form.setFieldsValue({\r\n        title: item.title,\r\n        subtitle: item.subtitle,\r\n        tag: item.tag,\r\n        badge: item.badge,\r\n        url: item.url,\r\n        image: item.image,\r\n        // Colors\r\n        tag_color: item.tag_color || \"#ffffff\",\r\n        tag_text_color: item.tag_text_color || \"#000000\",\r\n        badge_color: item.badge_color || \"#000000\"\r\n      });\r\n      setPreviewData(item);\r\n    } else {\r\n        form.resetFields();\r\n        setPreviewData({});\r\n    }\r\n  }, [open, item, form]);\r\n\r\n  // Handle Form Change -> Update Preview\r\n  const handleValuesChange = (_: any, allValues: any) => {\r\n      setPreviewData(allValues);\r\n  };\r\n\r\n  const handleOk = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const values = await form.validateFields();\r\n      if (!item?.id) return;\r\n\r\n      const payload = {\r\n        id: item.id,\r\n        fields: values,\r\n      };\r\n\r\n      const res = await axios.post(\r\n          `${API_CONFIG.BASE_URL}${API_ENDPOINTS.UPDATE_POLICY_OPTIONS}`,\r\n          payload,\r\n          { headers: { \"Content-Type\": \"application/json\" } }\r\n      );\r\n\r\n      if (res.data?.status) {\r\n        toast.success(\"Policy updated successfully\");\r\n        onSuccess({ ...item, ...values });\r\n        onCancel();\r\n      } else {\r\n        throw new Error(res.data?.message || \"Failed\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast.error(\"Failed to update policy\");\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onOk={handleOk}\r\n      onCancel={onCancel}\r\n      width={1000}\r\n      centered\r\n      footer={null}\r\n      destroyOnClose\r\n      className=\"rounded-2xl overflow-hidden\"\r\n      wrapClassName=\"backdrop-blur-sm\"\r\n      closeIcon={null} // Cleaner look\r\n    >\r\n      <div className=\"flex h-[600px]\">\r\n        {/* LEFT: EDITOR */}\r\n        <div className=\"w-[55%] p-8 overflow-y-auto scrollbar-hide\">\r\n            \r\n            <div className=\"mb-8\">\r\n                <h2 className=\"text-2xl font-bold text-gray-800\">Edit Dashboard Card</h2>\r\n                <p className=\"text-gray-500\">Customize the appearance of this card on the main dashboard.</p>\r\n            </div>\r\n\r\n            <Form \r\n                form={form} \r\n                layout=\"vertical\" \r\n                onValuesChange={handleValuesChange}\r\n                requiredMark={false}\r\n            >\r\n                {/* 1. Content Section */}\r\n                <div className=\"mb-8\">\r\n                    <h3 className=\"text-sm font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                        <Type size={16} className=\"text-blue-500\" /> Content\r\n                    </h3>\r\n                    \r\n                    <Row gutter={16}>\r\n                        <Col span={24}>\r\n                            <Form.Item name=\"title\" label=\"Title\" rules={[{ required: true }]}>\r\n                                <Input size=\"large\" prefix={<Type size={16} className=\"text-gray-400\" />} />\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col span={24}>\r\n                            <Form.Item name=\"subtitle\" label=\"Subtitle\">\r\n                                <Input size=\"large\" prefix={<Type size={16} className=\"text-gray-400\" />} />\r\n                            </Form.Item>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n\r\n                <Divider className=\"my-6 border-gray-100\" />\r\n\r\n                {/* 2. Visuals Section */}\r\n                <div className=\"mb-8\">\r\n                    <h3 className=\"text-sm font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                        <Palette size={16} className=\"text-purple-500\" /> Visuals\r\n                    </h3>\r\n\r\n                    <Row gutter={16} className=\"mb-4\">\r\n                        <Col span={12}>\r\n                             <Form.Item name=\"tag_color\" className=\"mb-1\">\r\n                                <div /> \r\n                            </Form.Item>\r\n                            <ColorPickerPopover \r\n                                label=\"Tag Background\"\r\n                                color={previewData.tag_color || \"#ffffff\"} \r\n                                onChange={(c) => {\r\n                                    form.setFieldValue(\"tag_color\", c);\r\n                                    setPreviewData(prev => ({ ...prev, tag_color: c }));\r\n                                }} \r\n                            />\r\n                        </Col>\r\n                         <Col span={12}>\r\n                            <Form.Item name=\"tag_text_color\" className=\"mb-1\">\r\n                                <div />\r\n                            </Form.Item>\r\n                             <ColorPickerPopover \r\n                                label=\"Tag Text Color\"\r\n                                color={previewData.tag_text_color || \"#000000\"} \r\n                                onChange={(c) => {\r\n                                    form.setFieldValue(\"tag_text_color\", c);\r\n                                    setPreviewData(prev => ({ ...prev, tag_text_color: c }));\r\n                                }} \r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                     <Row gutter={16}>\r\n                        <Col span={12}>\r\n                            <Form.Item name=\"badge_color\" className=\"mb-1\">\r\n                                <div />\r\n                            </Form.Item>\r\n                             <ColorPickerPopover \r\n                                label=\"Badge Color\"\r\n                                color={previewData.badge_color || \"#000000\"} \r\n                                onChange={(c) => {\r\n                                    form.setFieldValue(\"badge_color\", c);\r\n                                    setPreviewData(prev => ({ ...prev, badge_color: c }));\r\n                                }} \r\n                            />\r\n                        </Col>\r\n                     </Row>\r\n                </div>\r\n\r\n                 <Divider className=\"my-6 border-gray-100\" />\r\n\r\n                {/* 3. Badges & Links */}\r\n                <div>\r\n                     <h3 className=\"text-sm font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                        <BadgeCheck size={16} className=\"text-green-500\" /> Badges & Links\r\n                    </h3>\r\n                    <Row gutter={16}>\r\n                        <Col span={12}>\r\n                            <Form.Item name=\"tag\" label=\"Tag Text\">\r\n                                <Input prefix={<Tag size={16} className=\"text-gray-400\" />} />\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col span={12}>\r\n                            <Form.Item name=\"badge\" label=\"Badge Text\">\r\n                                <Input prefix={<BadgeCheck size={16} className=\"text-gray-400\" />} />\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col span={24}>\r\n                            <Form.Item name=\"url\" label=\"Target URL\">\r\n                                <Input prefix={<LinkIcon size={16} className=\"text-gray-400\" />} />\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col span={24}>\r\n                            <Form.Item name=\"image\" label=\"Image URL\">\r\n                                <Input prefix={<ImageIcon size={16} className=\"text-gray-400\" />} />\r\n                            </Form.Item>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n\r\n                <div className=\"h-12\" /> {/* Spacer */}\r\n            </Form>\r\n        </div>\r\n\r\n        {/* RIGHT: LIVE PREVIEW SIDEBAR */}\r\n        <div className=\"w-[45%] bg-gray-50 border-l border-gray-100 p-6 flex flex-col\">\r\n            <CardPreview values={previewData} />\r\n            \r\n            <div className=\"mt-6 flex flex-col gap-3\">\r\n                 <Button \r\n                    type=\"primary\" \r\n                    size=\"large\" \r\n                    onClick={handleOk} \r\n                    loading={loading}\r\n                    className=\"h-12 text-base font-semibold shadow-lg shadow-blue-200\"\r\n                    block\r\n                    icon={<Check size={18} />}\r\n                >\r\n                    Save Changes\r\n                </Button>\r\n                <Button \r\n                    size=\"large\" \r\n                    onClick={onCancel} \r\n                    block\r\n                    className=\"text-gray-500\"\r\n                >\r\n                    Cancel\r\n                </Button>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditPolicyModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 952, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Downloads/One%20click/src/pages/manage-dashboard.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Skeleton, Button, Input, Empty } from \"antd\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\nimport { Search, Edit3, Image as ImageIcon } from \"lucide-react\";\r\n\r\nimport { API_CONFIG, API_ENDPOINTS } from \"@/api/config\";\r\nimport { InsuranceItem } from \"@/api/types\";\r\nimport EditPolicyModal from \"@/components/manageDashboard/EditPolicyModal\";\r\n\r\nconst showValue = (value?: string | null) =>\r\n  value && value.trim() !== \"\" ? value : \"NA\";\r\n\r\nconst ManageDashboard = () => {\r\n  const [data, setData] = useState<InsuranceItem[]>([]);\r\n  const [filteredData, setFilteredData] = useState<InsuranceItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n\r\n  // Modal State\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState<InsuranceItem | null>(null);\r\n\r\n  /* ---------- Fetch Data ---------- */\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          `${API_CONFIG.BASE_URL}${API_ENDPOINTS.GET_POLICY_OPTIONS}`\r\n        );\r\n        if (res.data?.status) {\r\n          const list = res.data.data || [];\r\n          setData(list);\r\n          setFilteredData(list);\r\n        }\r\n      } catch (error) {\r\n        toast.error(\"Failed to load policies\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  /* ---------- Search Logic ---------- */\r\n  useEffect(() => {\r\n    const lowerSearch = searchText.toLowerCase();\r\n    const filtered = data.filter(\r\n      (item) =>\r\n        (item.title || \"\").toLowerCase().includes(lowerSearch) ||\r\n        (item.subtitle || \"\").toLowerCase().includes(lowerSearch) ||\r\n        (item.tag || \"\").toLowerCase().includes(lowerSearch)\r\n    );\r\n    setFilteredData(filtered);\r\n  }, [searchText, data]);\r\n\r\n  /* ---------- Handlers ---------- */\r\n  const openModal = (item: InsuranceItem) => {\r\n    setSelectedItem(item);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedItem(null);\r\n  };\r\n\r\n  // Called when Child Modal successfully updates via API\r\n  const handleUpdateSuccess = (updatedItem: InsuranceItem) => {\r\n    const newData = data.map((item) =>\r\n      Number(item.id) === Number(updatedItem.id) ? updatedItem : item\r\n    );\r\n    setData(newData);\r\n    // Filter will update automatically via effect\r\n    closeModal();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* HEADER SECTION */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6\">\r\n        <div>\r\n          <h1 className=\"text-xl font-semibold flex items-center\">\r\n            Manage Dashboard\r\n          </h1>\r\n          {/* <p className=\"text-gray-500 text-sm mt-1\">\r\n            Customize appearance of dashboard cards.\r\n          </p> */}\r\n        </div>\r\n\r\n        {/* Search Bar */}\r\n        <div className=\"w-full md:w-80\">\r\n          <Input\r\n            placeholder=\"Search policies...\"\r\n            prefix={<Search className=\"text-gray-400\" size={16} />}\r\n            allowClear\r\n            value={searchText}\r\n            onChange={(e) => setSearchText(e.target.value)}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* GRID SECTION */}\r\n      {loading ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div\r\n              key={i}\r\n              className=\"bg-white rounded-xl border border-gray-200 p-4 h-72 flex flex-col gap-4\"\r\n            >\r\n              <Skeleton.Image active className=\"!w-full !h-32\" />\r\n              <Skeleton active paragraph={{ rows: 2 }} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : filteredData.length === 0 ? (\r\n        <div className=\"flex flex-col items-center justify-center py-16 bg-white rounded-xl border border-dashed border-gray-300\">\r\n          <Empty\r\n            description={<span className=\"text-gray-500\">No cards found</span>}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n          {filteredData.map((item) => (\r\n            <div\r\n              key={item.id}\r\n              className=\"group bg-white rounded-xl p-4 shadow-sm border border-gray-200 hover:shadow-md hover:border-blue-300 transition-all duration-200 flex flex-col relative overflow-hidden\"\r\n            >\r\n              {/* Badge */}\r\n              <div\r\n                className=\"absolute top-3 right-3 px-2 py-0.5 text-[10px] font-bold rounded shadow-sm z-10\"\r\n                style={{\r\n                  backgroundColor: item.badge_color || \"#000000\",\r\n                  color: \"#ffffff\",\r\n                }}\r\n              >\r\n                {showValue(item.badge)}\r\n              </div>\r\n\r\n              {/* Image Area */}\r\n              <div className=\"h-32 w-full flex items-center justify-center mb-3 bg-gray-50 rounded-lg overflow-hidden border border-gray-100\">\r\n                {item.image ? (\r\n                  <img\r\n                    src={item.image}\r\n                    className=\"h-full object-contain p-2\"\r\n                    alt=\"card\"\r\n                  />\r\n                ) : (\r\n                  <ImageIcon className=\"text-gray-300\" size={32} />\r\n                )}\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"flex-1 flex flex-col min-h-0\">\r\n                <h2\r\n                  className=\"font-bold text-base text-gray-800 leading-tight mb-1 truncate\"\r\n                  title={showValue(item.title)}\r\n                >\r\n                  {showValue(item.title)}\r\n                </h2>\r\n                <p className=\"text-xs text-gray-500 line-clamp-2 mb-3 h-8\">\r\n                  {showValue(item.subtitle)}\r\n                </p>\r\n\r\n                <div className=\"mt-auto flex items-center justify-between\">\r\n                  <span\r\n                    className=\"inline-block px-2 py-0.5 text-[10px] font-semibold rounded\"\r\n                    style={{\r\n                      backgroundColor: item.tag_color || \"#f3f4f6\",\r\n                      color: item.tag_text_color || \"#1f2937\",\r\n                    }}\r\n                  >\r\n                    {showValue(item.tag)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Button */}\r\n              <Button\r\n                type=\"primary\"\r\n                className=\"mt-3 w-full h-8 text-xs font-medium\"\r\n                icon={<Edit3 size={14} />}\r\n                onClick={() => openModal(item)}\r\n              >\r\n                Edit\r\n              </Button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* ----------EDIT MODAL ---------- */}\r\n      <EditPolicyModal\r\n        open={isModalOpen}\r\n        item={selectedItem}\r\n        onCancel={closeModal}\r\n        onSuccess={handleUpdateSuccess}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageDashboard;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}