{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Downloads/One%20click/src/pages/manage-dashboard.tsx"],"sourcesContent":["import { NextPage } from \"next\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Skeleton, Modal, Form, Input, Button } from \"antd\";\r\nimport { HexColorPicker } from \"react-colorful\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nimport { API_CONFIG, API_ENDPOINTS } from \"@/api/config\";\r\nimport { InsuranceItem } from \"@/api/types\";\r\n\r\nconst showValue = (value?: string | null) =>\r\n  value && value.trim() !== \"\" ? value : \"NA\";\r\n\r\n/* ---------- Color Picker Field ---------- */\r\nconst ColorPickerField = ({\r\n  label,\r\n  color,\r\n  onClick,\r\n}: {\r\n  label: string;\r\n  color: string;\r\n  onClick: () => void;\r\n}) => (\r\n  <div>\r\n    <label className=\"block mb-1 font-medium text-sm\">{label}</label>\r\n    <div\r\n      className=\"h-8 w-full border rounded cursor-pointer\"\r\n      style={{ backgroundColor: color }}\r\n      onClick={onClick}\r\n    />\r\n    <span className=\"text-xs text-gray-500\">{color}</span>\r\n  </div>\r\n);\r\n\r\nconst Home: NextPage = () => {\r\n  const [data, setData] = useState<InsuranceItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState<InsuranceItem | null>(null);\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [tagColor, setTagColor] = useState(\"#ffffff\");\r\n  const [tagTextColor, setTagTextColor] = useState(\"#000000\");\r\n  const [badgeColor, setBadgeColor] = useState(\"#ffffff\");\r\n\r\n  const [tempColor, setTempColor] = useState(\"#ffffff\");\r\n  const [activePicker, setActivePicker] = useState<\r\n    \"tagBg\" | \"tagText\" | \"badge\" | null\r\n  >(null);\r\n\r\n  /* ---------- Fetch Data ---------- */\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          `${API_CONFIG.BASE_URL}${API_ENDPOINTS.GET_POLICY_OPTIONS}`\r\n        );\r\n        if (res.data?.status) setData(res.data.data || []);\r\n      } catch (error) {\r\n        toast.error(\"Failed to load policies\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  /* ---------- Modal Open ---------- */\r\n  const openModal = (item: InsuranceItem) => {\r\n    setSelectedItem(item);\r\n    setIsModalOpen(true);\r\n\r\n    form.setFieldsValue({\r\n      title: item.title,\r\n      subtitle: item.subtitle,\r\n      tag: item.tag,\r\n      badge: item.badge,\r\n      url: item.url,\r\n      image: item.image,\r\n    });\r\n\r\n    setTagColor(item.tag_color || \"#ffffff\");\r\n    setTagTextColor(item.tag_text_color || \"#000000\");\r\n    setBadgeColor(item.badge_color || \"#ffffff\");\r\n  };\r\n\r\n  /* ---------- Modal Close ---------- */\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedItem(null);\r\n    setActivePicker(null);\r\n    form.resetFields();\r\n  };\r\n\r\n  /* ---------- Save ---------- */\r\n  const handleOk = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n      if (!selectedItem?.id) return;\r\n\r\n      const payload = {\r\n        id: selectedItem.id,\r\n        fields: {\r\n          ...values,\r\n          tag_color: tagColor,\r\n          tag_text_color: tagTextColor,\r\n          badge_color: badgeColor,\r\n        },\r\n      };\r\n\r\n      const res = await toast.promise(\r\n        axios.post(\r\n          `${API_CONFIG.BASE_URL}${API_ENDPOINTS.UPDATE_POLICY_OPTIONS}`,\r\n          payload,\r\n          { headers: { \"Content-Type\": \"application/json\" } }\r\n        ),\r\n        {\r\n          loading: \"Updating policy...\",\r\n          success: \"Policy updated successfully\",\r\n          error: \"Update failed\",\r\n        }\r\n      );\r\n\r\n      if (res.data?.status) {\r\n        setData((prev) =>\r\n          prev.map((item) =>\r\n            Number(item.id) === Number(selectedItem.id)\r\n              ? { ...item, ...payload.fields }\r\n              : item\r\n          )\r\n        );\r\n        closeModal();\r\n      }\r\n    } catch {\r\n      toast.error(\"Something went wrong\");\r\n    }\r\n  };\r\n\r\n  const openPicker = (type: \"tagBg\" | \"tagText\" | \"badge\", color: string) => {\r\n    setTempColor(color);\r\n    setActivePicker(type);\r\n  };\r\n\r\n  const applyColor = () => {\r\n    if (activePicker === \"tagBg\") setTagColor(tempColor);\r\n    if (activePicker === \"tagText\") setTagTextColor(tempColor);\r\n    if (activePicker === \"badge\") setBadgeColor(tempColor);\r\n    setActivePicker(null);\r\n  };\r\n\r\n  if (loading) return <Skeleton active />;\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Manage Dashboard</h1>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6\">\r\n        {data.map((item) => (\r\n          <div\r\n            key={item.id}\r\n            className=\"shadow-lg rounded-xl p-4 bg-white flex flex-col hover:scale-105 transition\"\r\n          >\r\n            <span\r\n              className=\"absolute top-2 right-2 px-2 py-1 text-xs font-bold rounded\"\r\n              style={{\r\n                backgroundColor: item.badge_color || \"#000000\",\r\n                color: \"#ffffff\",\r\n              }}\r\n            >\r\n              {showValue(item.badge)}\r\n            </span>\r\n\r\n            <img\r\n              src={item.image || \"/no-image.png\"}\r\n              className=\"h-32 mx-auto mb-4\"\r\n              alt=\"card\"\r\n            />\r\n\r\n            <h2 className=\"font-bold\">{showValue(item.title)}</h2>\r\n            <p className=\"text-sm text-gray-500\">{showValue(item.subtitle)}</p>\r\n\r\n            <span\r\n              className=\"inline-block mt-3 px-2 py-1 text-xs rounded w-fit\"\r\n              style={{\r\n                backgroundColor: item.tag_color || \"#fff\",\r\n                color: item.tag_text_color || \"#000\",\r\n              }}\r\n            >\r\n              {showValue(item.tag)}\r\n            </span>\r\n            <br />\r\n            <Button\r\n              className=\"mt-auto w-full my-4\"\r\n              type=\"primary\"\r\n              onClick={() => openModal(item)}\r\n            >\r\n              Edit Card\r\n            </Button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ---------- MODAL ---------- */}\r\n      <Modal\r\n        title=\"Edit Card\"\r\n        open={isModalOpen}\r\n        onOk={handleOk}\r\n        onCancel={closeModal}\r\n        width={900}\r\n        okText=\"Save\"\r\n      >\r\n        <div className=\"flex gap-6\">\r\n          {/* LEFT */}\r\n          <div className=\"w-1/2\">\r\n            <Form form={form} layout=\"vertical\">\r\n              <Form.Item name=\"title\" label=\"Title\">\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item name=\"subtitle\" label=\"Subtitle\">\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item name=\"tag\" label=\"Tag Text\">\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item name=\"badge\" label=\"Badge Text\">\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item name=\"url\" label=\"URL\">\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item name=\"image\" label=\"Image\">\r\n                <Input />\r\n              </Form.Item>\r\n            </Form>\r\n          </div>\r\n\r\n          {/* RIGHT */}\r\n          <div className=\"w-1/2\">\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <ColorPickerField\r\n                label=\"Tag BG\"\r\n                color={tagColor}\r\n                onClick={() => openPicker(\"tagBg\", tagColor)}\r\n              />\r\n              <ColorPickerField\r\n                label=\"Tag Text\"\r\n                color={tagTextColor}\r\n                onClick={() => openPicker(\"tagText\", tagTextColor)}\r\n              />\r\n              <ColorPickerField\r\n                label=\"Badge\"\r\n                color={badgeColor}\r\n                onClick={() => openPicker(\"badge\", badgeColor)}\r\n              />\r\n            </div>\r\n\r\n            {activePicker && (\r\n              <div className=\"border p-3 rounded mt-4 w-[100%]\">\r\n                <HexColorPicker\r\n                  color={tempColor}\r\n                  onChange={setTempColor}\r\n                  style={{ width: 180, height: 120 }}\r\n                />\r\n                <br />\r\n                <Input\r\n                  className=\"mt-3\"\r\n                  value={tempColor}\r\n                  onChange={(e) => setTempColor(e.target.value)}\r\n                  maxLength={7}\r\n                />\r\n                <br />\r\n                <div className=\"flex justify-end gap-2 mt-3\">\r\n                  <Button onClick={() => setActivePicker(null)}>Cancel</Button>\r\n                  <Button type=\"primary\" onClick={applyColor}>\r\n                    OK\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}